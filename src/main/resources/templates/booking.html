<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Tourify - Checkout</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
    />


    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
            rel="stylesheet"
    />


    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
            rel="stylesheet"
    />

    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />


    <link href="../css/index.css" rel="stylesheet"/>
    <link href="../css/booking.css" rel="stylesheet"/>



</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top shadow-sm">
    <div class="container">
        <a class="navbar-brand" th:href="@{/landing}">
            <img src="https://images.pexels.com/photos/9072375/pexels-photo-9072375.jpeg?auto=compress&cs=tinysrgb&w=1600"
                 height="40" alt="Tourify" />
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar"
                aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNavbar">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="navMenu">
                <li class="nav-item">
                    <a class="nav-link nav-custom active" th:href="@{/landing}">
                        <i class="fas fa-house me-2"></i>Home
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-custom" th:href="@{/user/favorites}">
                        <i class="fas fa-heart me-2"></i>Favorites
                    </a>
                </li>
                <!-- Dashboard chỉ dành cho ADMIN -->
                <li class="nav-item" id="dashboard-link" style="display:none;">
                    <a class="nav-link nav-custom" th:href="@{/dashboard}">
                        <i class="fas fa-chart-line me-2"></i>Dashboard
                    </a>
                </li>
            </ul>


            <div class="d-flex align-items-center gap-3">
                <div class="dropdown">
                    <button class="btn dropdown-toggle text-white d-flex align-items-center nav-custom"
                            type="button" id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="https://images.pexels.com/photos/9072375/pexels-photo-9072375.jpeg?auto=compress&cs=tinysrgb&w=1600"
                             alt="Avatar" class="rounded-circle me-2" width="32" height="32" />
                        <span>Hello,
                                <span>User</span></span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
                        <li>
                            <a class="dropdown-item" th:href="@{/user/profile}" id="profile-view"><i class="fas fa-user-circle me-2"></i>View Profile</a>
                        </li>
                        <li>
                            <a class="dropdown-item" th:href="@{/user/edit-account}" id="account-edit"><i class="fas fa-edit me-2"></i>Edit Account</a>
                        </li>
                        <li>
                            <a class="dropdown-item" th:href="@{/user/viewed}" id="list-viewed">
                                <i class="fas fa-eye me-2"></i>List Viewed</a>
                        </li>
                    </ul>
                </div>
                <button id="logout-link" type="submit" class="btn btn-outline-light btn-sm px-3">
                    <i class="fas fa-sign-out-alt me-1"></i>Logout
                </button>
            </div>
        </div>
    </div>
</nav>


<!-- Main Content -->
<div class="container py-5">
    <!-- Breadcrumb + Title + Price -->
    <nav aria-label="breadcrumb" class="custom-breadcrumb mt-3 mb-4">
        <ol class="breadcrumb bg-white rounded shadow-sm px-3 py-2">
            <!-- Home -->
            <li class="breadcrumb-item">
                <a href="/tourify">
                    <i class="fas fa-home me-1"></i>Home
                </a>
            </li>


            <!-- Da Nang -->
            <li class="breadcrumb-item">
                <a href="location/da-nang">
                    <i class="fas fa-map-marker-alt me-1"></i>
                    <span id="place-name">Da Nang</span>
                </a>
            </li>


            <!-- Tour Detail -->
            <li class="breadcrumb-item">
                <a href="tourdetail.html">
                    <i class="fas fa-route me-1"></i>
                    <span id="tour-title-short-link">Da Nang City Discovery Tour</span>
                </a>
            </li>


            <!-- Booking Page (current) -->
            <li aria-current="page" class="breadcrumb-item active">
                <i class="fas fa-ticket-alt me-1"></i>Booking
            </li>
        </ol>
    </nav>


    <!-- Main Content -->
    <div class="row">
        <!-- Left Column -->
        <div class="col-lg-8">
            <div class="section-box">
                <div
                        class="d-flex justify-content-between align-items-center tour-header"
                >
                    <h4 class="tour-title" id="tour-title">Da Nang City Discovery Tour</h4>
                    <div class="price" id="tour-price">$240</div>
                </div>


                <div class="mt-4 p-4 bg-light rounded-4 shadow-sm">
                    <div class="row align-items-center">
                        <!-- Adult & Child Modern Control -->
                        <div class="col-md-6">
                            <div class="mb-4">
                                <!-- Adult -->
                                <label class="form-label fw-semibold text-dark mb-2"
                                >Adult</label
                                >
                                <div class="input-group fancy-counter mb-4">
                                    <button
                                            class="counter-btn minus"
                                            data-target="adultInput"
                                            id="adult-minus"
                                    >
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input
                                            class="form-control counter-display"
                                            id="adultInput"
                                            readonly
                                            type="text"
                                            value="1"
                                    />
                                    <button class="counter-btn plus" data-target="adultInput" id="adult-plus">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>


                                <!-- Child -->
                                <label class="form-label fw-semibold text-dark mb-2"
                                >Child</label
                                >
                                <div class="input-group fancy-counter">
                                    <button
                                            class="counter-btn minus"
                                            data-target="childInput"
                                            id="child-minus"
                                    >
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input
                                            class="form-control counter-display"
                                            id="childInput"
                                            readonly
                                            type="text"
                                            value="0"
                                    />
                                    <button class="counter-btn plus" data-target="childInput" id="child-plus">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>


                        <!-- Right column: Booking code -->
                        <div class="col-md-6 d-flex justify-content-center">
                            <div
                                    class="airline-box d-flex align-items-center p-4 rounded-4 border border-success-subtle shadow-lg gap-4 bg-white airline-glow"
                            >
                                <div class="airline-logo-box">
                                    <img
                                            alt="Airline"
                                            class="img-fluid rounded-circle
                                    airline-logo"
                                            src="https://images.pexels.com/photos/15483696/pexels-photo-15483696/free-photo-of-c-c-a-r-p-saudi.jpeg"/>
                                </div>
                                <div class="d-flex flex-column justify-content-center">
                                    <h5
                                            class="mb-1 fw-bold text-center fs-5"
                                            style="
                          color: #20c997;
                          text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
                          letter-spacing: 0.5px;
                        "
                                    >
                                        HOIANNA
                                    </h5>


                                    <span
                                            class="badge text-bg-light px-3 py-2 shadow-sm text-secondary fw-semibold rounded-pill"
                                    >
                        Code: HOIANNA320
                      </span>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Dates -->
                    <div class="d-flex align-items-center justify-content-center mb-4">
                        <div class="date-container d-flex align-items-center gap-2">
                            <!-- Plane Icon -->
                            <i class="fas fa-plane fa-lg text-dark"></i>

                            <!-- Calendar Icon -->
                            <div class="calendar-icon-box">
                                <i class="fas fa-calendar-alt text-success"></i>
                            </div>

                            <!-- chỉ 1 input text để hiển thị -->
                            <input
                                    id="startDateDisplay"
                                    class="form-control"
                                    type="text"
                                    placeholder="dd-mm-yyyy"
                                    readonly
                            />
                        </div>
                    </div>

                    <!-- Discount -->
                    <!-- Custom Promotion Dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-outline-success dropdown-toggle w-100" type="button"
                                id="promotionDropdownBtn" data-bs-toggle="dropdown" aria-expanded="false">
                            Chọn mã giảm giá
                        </button>
                        <ul class="dropdown-menu w-100" id="promotionDropdownList">
                            <!-- Các option sẽ được thêm bằng JS -->
                        </ul>
                    </div>

                    <!-- Ẩn input để lưu giá trị code đã chọn -->
                    <input type="hidden" id="selectedPromotionCode">
                    </div>


                    <!-- Payment Methods -->
                    <div class="payment-options d-flex flex-column gap-3 mt-4">
                        <!-- Pay in Bank -->
                        <label class="payment-card active" for="payBank">
                            <input
                                    checked
                                    class="form-check-input visually-hidden"
                                    id="payBank"
                                    name="payment"
                                    type="radio"
                            />
                            <div class="payment-text">
                                <div class="payment-title">Pay in bank</div>
                                <div class="payment-subtext">
                                    Payment will be made in cash upon delivery.
                                </div>
                            </div>
                            <div class="payment-circle"></div>
                        </label>


                        <!-- Pay in T-Pay -->
                        <label class="payment-card" for="payTpay">
                            <input
                                    class="form-check-input visually-hidden"
                                    id="payTpay"
                                    name="payment"
                                    type="radio"
                            />
                            <div class="payment-text">
                                <div class="payment-title">Pay in T-Pay</div>
                                <div class="payment-subtext">
                                    T-Pay is a secure and user-friendly e-wallet designed
                                    specifically for travelers booking with Tourify.
                                </div>
                            </div>
                            <div class="payment-circle"></div>
                        </label>
                    </div>
                </div>
            </div>

        <!-- Right Column -->
        <div class="col-lg-4">
            <div class="card-summary">
                <div class="d-flex align-items-center mb-4">
                    <img
                            alt="Tour Thumbnail"
                            class="rounded-4 shadow-sm me-3"
                            height="60"
                            src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e"
                            style="object-fit: cover"
                            width="60"
                    />
                    <div>
                        <h6 class="mb-1" id="tour-sub-title">Da Nang City Discovery Tour</h6>
                        <small
                        ><i class="fas fa-star text-warning me-1"></i>Very Good · 54
                            reviews</small
                        >
                    </div>
                </div>


                <div class="booking-protection">
                    <i class="fas fa-shield-alt text-success"></i>
                    <span
                    >Your booking is protected by
                <strong class="text-dark">golobe</strong></span
                    >
                </div>


                <div class="border-top pt-3">
                    <div class="price-row">
                        <span>Original Price</span>
                        <span class="price-row" id="original-price">400 VND</span>
                    </div>
                    <div class="price-row">
                        <span>Discount</span>
                        <span class="text-success" id="discount-amount" >- 0 VND</span>
                    </div>
<!--                    <div class="price-row">-->
<!--                        <span>Taxes</span>-->
<!--                        <span>20 VND</span>-->
<!--                    </div>-->
<!--                    <div class="price-row">-->
<!--                        <span>Service Fee</span>-->
<!--                        <span>10 VND</span>-->
<!--                    </div>-->
                    <div class="total-row">
                        <span>Total</span>
                        <span id="total-amount">0 VND</span>
                    </div>
                </div>


                <button class="btn btn-checkout mt-4 w-100" disabled id="checkoutBtn"
                        onclick="handleCheckout(this)">
                    <i class="fas fa-credit-card me-2"></i>Check Out
                </button>
            </div>
        </div>

        <!-- User Information Column -->
        <div class="section-box p-4 bg-white rounded-4 shadow-sm">
            <!-- Avatar & Thông tin -->
            <div
                class="d-flex align-items-center rounded-4 p-3 mb-4 shadow position-relative"
                id="cardHeader"
                onclick="toggleReveal(this)"
                style="
                cursor: pointer;
                background: rgba(240, 255, 250, 0.7);
                backdrop-filter: blur(10px);
                transition: all 0.3s ease;
              "
        >
            <!-- Avatar -->
            <img
                    id="avatarImg"
                    alt="User Avatar"
                    class="rounded-circle border border-success shadow-sm me-3"
                    height="50"
                    src="https://images.pexels.com/photos/9072375/pexels-photo-9072375.jpeg?auto=compress&cs=tinysrgb&w=1600"
                    width="50"
            />


            <!-- Info -->
            <div
                    class="d-flex justify-content-between align-items-center w-100"
            >
                <div
                        class="fw-semibold text-dark d-flex align-items-center gap-3"
                >
                    <i class="fa-solid fa-credit-card text-success fs-5"></i>


                    <!-- Card number -->
                    <span id="cardNumber"
                    >**** <span class="fw-bold">4321</span></span
                    >


                    <!-- Toggle visibility -->
                    <button
                            aria-label="Toggle card number"
                            class="btn btn-sm btn-outline-secondary d-flex align-items-center justify-content-center"
                            onclick="toggleCardNumber(event)"
                            style="width: 34px; height: 34px"
                            title="Toggle card number"
                    >
                        <i class="fas fa-eye" id="eyeIcon"></i>
                    </button>
                </div>


                <!-- Check icon -->
                <i
                        class="fas fa-check-circle fs-4 text-muted"
                        id="checkIcon"
                        style="transition: color 0.25s ease"
                ></i>
            </div>
        </div>

            <!-- Thông tin người dùng -->
            <div id="accountFields" class="d-none">
                <!-- Họ tên -->
                <div class="mb-3">
                    <div class="text-muted small"><i class="fas fa-id-badge me-2"></i>Họ và tên</div>
                    <div class="fw-bold" id="nameDisplay">Chưa có dữ liệu</div>
                </div>

                <!-- Email -->
                <div class="mb-3">
                    <div class="text-muted small"><i class="fas fa-envelope me-2"></i>Email</div>
                    <div class="fw-bold" id="emailDisplay">Chưa có dữ liệu</div>
                </div>

                <!-- Số điện thoại -->
                <div class="mb-3">
                    <div class="text-muted small"><i class="fas fa-phone me-2"></i>Số điện thoại</div>
                    <div class="fw-bold" id="phoneDisplay">Chưa có dữ liệu</div>
                </div>

                <!-- Địa chỉ -->
                <div class="mb-3">
                    <div class="text-muted small"><i class="fas fa-map-marker-alt me-2"></i>Địa chỉ</div>
                    <div class="fw-bold" id="addressDisplay">Chưa có dữ liệu</div>
                </div>

                <!-- Ngày sinh -->
                <div class="mb-3">
                    <div class="text-muted small"><i class="fas fa-calendar-alt me-2"></i>Ngày sinh</div>
                    <div class="fw-bold" id="dobDisplay">Chưa có dữ liệu</div>
                </div>
            </div>
        </div>
    </div>


    <!-- Newsletter Section -->
    <div class="newsletter-section">
        <div class="newsletter-content">
            <h3 class="newsletter-title">Subscribe Newsletter</h3>
            <p class="newsletter-subtitle">
                The Travel<br/>Get inspired! Receive travel discounts, tips and
                behind the scenes stories.
            </p>
            <div class="newsletter-form">
                <input
                        class="newsletter-input"
                        placeholder="Your email address"
                        type="email"
                />
                <button class="newsletter-btn">Subscribe</button>
            </div>
        </div>
        <img
                alt="Newsletter"
                class="newsletter-image"
                src="https://images.pexels.com/photos/1435752/pexels-photo-1435752.jpeg?auto=compress&cs=tinysrgb&w=1600"
        />
    </div>
</div>


<!-- Footer -->
<footer class="footer mt-5">
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <h5 class="footer-title">g-lobe</h5>
                <div class="social-icons">
                    <a class="social-icon facebook" href="#"
                    ><i class="fab fa-facebook"></i
                    ></a>
                    <a class="social-icon twitter" href="#"
                    ><i class="fab fa-twitter"></i
                    ></a>
                    <a class="social-icon youtube" href="#"
                    ><i class="fab fa-youtube"></i
                    ></a>
                    <a class="social-icon instagram" href="#"
                    ><i class="fab fa-instagram"></i
                    ></a>
                </div>
            </div>
            <div class="col-md-2">
                <h5 class="footer-title">Our Destinations</h5>
                <ul class="footer-links">
                    <li><a href="#">Canada</a></li>
                    <li><a href="#">Alaska</a></li>
                    <li><a href="#">France</a></li>
                    <li><a href="#">Iceland</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <h5 class="footer-title">Our Activities</h5>
                <ul class="footer-links">
                    <li><a href="#">Northern Lights</a></li>
                    <li><a href="#">Cruising & sailing</a></li>
                    <li><a href="#">Multi-activities</a></li>
                    <li><a href="#">Kayaking</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <h5 class="footer-title">Travel Blogs</h5>
                <ul class="footer-links">
                    <li><a href="#">Bali Travel Guide</a></li>
                    <li><a href="#">Sri Lanka Travel Guide</a></li>
                    <li><a href="#">Peru Travel Guide</a></li>
                    <li><a href="#">Bali Travel Guide</a></li>
                </ul>
            </div>
            <div class="col-md-3">
                <h5 class="footer-title">About Us</h5>
                <ul class="footer-links">
                    <li><a href="#">Our Story</a></li>
                    <li><a href="#">Work with us</a></li>
                </ul>
                <h5 class="footer-title mt-3">Contact Us</h5>
                <ul class="footer-links">
                    <li><a href="#">Our Story</a></li>
                    <li><a href="#">Work with us</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>


<!-- QR Code Modal -->
<div aria-hidden="true" aria-labelledby="qrModalLabel" class="modal fade" id="qrModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-4 text-center position-relative">
            <!-- Nút đóng modal (X) -->
            <button aria-label="Close" class="btn-close position-absolute top-0 end-0 m-3" data-bs-dismiss="modal"
                    type="button"></button>


            <h5 class="modal-title fw-bold mb-3 text-success" id="qrModalLabel" style="font-size: 1.75rem">
                TOURIFY
            </h5>


            <div class="form-check d-flex align-items-center gap-2 mb-3">
                <input class="form-check-input custom-checkbox" id="saveInfoCheck" type="checkbox"/>
                <label class="form-check-label small" for="saveInfoCheck">
                    Securely save my information for 1-click checkout
                </label>
            </div>


            <div class="px-4 py-2 lg:basis-1/2" id="showQRCode">
                <div class="flex items-center justify-center w-full text-center">
                    <canvas id="qr"></canvas>
                </div>
            </div>


            <button class="btn btn-outline-success mt-4 px-4 py-2 rounded-pill fw-semibold"
                    onclick="reloadQRCode()">
                Reload QA Code
            </button>


            <p class="text-muted small mt-3 mb-0 px-3" style="font-size: 0.75rem">
                By confirming your subscription, you allow The Outdoor Inn Crowd
                Limited to charge your card for this payment and future payments in
                accordance with their terms. You can always cancel your
                subscription.
            </p>
        </div>
    </div>
</div>


<!-- Promotion Detail Modal -->
<div class="modal fade" id="promotionModal" tabindex="-1" aria-labelledby="promotionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content shadow-lg border-success border-3">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title d-flex align-items-center" id="promotionModalLabel">
                    <i class="fas fa-gift me-2 fs-5"></i> Ưu đãi siêu hấp dẫn 🎉
                </h5>
                <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <div class="alert alert-warning border-0 text-dark shadow-sm mb-4">
                    ⏰ <strong>Số lượng có hạn!</strong> Hãy đặt tour ngay để không bỏ lỡ ưu đãi cực sốc này!
                </div>

                <p class="mb-2"><i class="fas fa-tag me-2 text-success"></i><strong>Mã khuyến mãi:</strong> <span id="promo-code" class="fw-bold text-danger"></span></p>
                <p class="mb-2"><i class="fas fa-percent me-2 text-success"></i><strong>Giảm giá:</strong> <span id="promo-discount" class="fw-bold"></span>%</p>
                <p class="mb-2"><i class="fas fa-boxes me-2 text-success"></i><strong>Số lượng còn lại:</strong> <span id="promo-quantity"></span></p>
                <p class="mb-2"><i class="fas fa-info-circle me-2 text-success"></i><strong>Điều kiện:</strong> <span id="promo-conditions"></span></p>
                <p class="mb-2"><i class="fas fa-align-left me-2 text-success"></i><strong>Mô tả:</strong> <span id="promo-description"></span></p>
                <p class="mb-2"><i class="fas fa-wallet me-2 text-success"></i><strong>Giá trị đơn tối thiểu:</strong> <span id="promo-min-purchase"></span> VND</p>
                <p class="mb-3"><i class="fas fa-clock me-2 text-success"></i><strong>Thời gian áp dụng:</strong> <span id="promo-time"></span></p>

                <div class="text-center mt-4">
                    <button
                            class="btn btn-danger btn-lg w-100 fw-bold"
                            id="applyPromotionBtn"
                    >
                        ✨ Ưu đãi sắp biến mất – Dùng mã và đặt tour ngay!
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Bootstrap JS Bundle (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script src="../js/booking.js"></script>
<script src="../js/logout.js"></script>
<script src="../js/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</body>
</html>